<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Management</title>
<style>
  body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; padding: 24px; }
  h2 { font-size: 24px; margin-bottom: 24px; }
  h3 { font-size: 18px; margin-bottom: 12px; }
  .flex { display: flex; align-items: center; }
  .justify-between { justify-content: space-between; }
  .gap-2 { gap: 8px; }
  .gap-3 { gap: 12px; }
  .grid { display: grid; gap: 16px; }
  .grid-2 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 16px; }
  .rounded-lg { border-radius: 10px; }
  .p-4 { padding: 16px; }
  .p-6 { padding: 24px; }
  .mb-2 { margin-bottom: 8px; }
  .mb-3 { margin-bottom: 12px; }
  .mb-4 { margin-bottom: 16px; }
  .mb-6 { margin-bottom: 24px; }
  .mt-1 { margin-top: 4px; }
  .text-sm { font-size: 14px; }
  .text-xs { font-size: 12px; }
  .text-gray { color: #6b7280; }
  .text-green { color: #16a34a; }
  .text-yellow { color: #b45309; }
  .text-red { color: #b91c1c; }
  .bg-blue { background: #e0f2fe; color: #0369a1; }
  .bg-purple { background: #ddd6fe; color: #7c3aed; }
  .bg-gray { background: #f3f4f6; }
  .bg-green-light { background-color: #dcfce7; color: #16a34a; }
  .bg-yellow-light { background-color: #fef9c3; color: #b45309; }
  .bg-red-light { background-color: #fee2e2; color: #b91c1c; }
  .border { border: 1px solid #e5e7eb; }
  .rounded-full { border-radius: 9999px; }
  .px-3 { padding-left: 12px; padding-right: 12px; }
  .py-1 { padding-top: 4px; padding-bottom: 4px; }
  input, textarea, select { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; outline: none; }
  input:focus, textarea:focus, select:focus { border-color: #7c3aed; }
  button { cursor: pointer; border: none; border-radius: 6px; padding: 8px 12px; }
  button:hover { opacity: 0.9; }
  .product-img { width: 100%; height: 150px; object-fit: cover; border-radius: 6px; }
  .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .hidden { display: none; }
</style>
</head>
<body>

<h2>My Products</h2>
<div class="flex justify-between mb-6">
  <button id="add-btn" class="bg-purple text-white flex gap-2">‚ûï Add Product</button>
</div>

<!-- Add/Edit Form -->
<div id="product-form-container" class="card mb-6 hidden">
  <div class="flex justify-between mb-4">
    <h3 id="form-title">Add New Product</h3>
    <button id="form-cancel">‚ùå</button>
  </div>
  <form id="product-form">
    <div class="grid grid-2 gap-4 mb-4">
      <div>
        <label class="text-sm mb-1">Product Name</label>
        <input type="text" id="product-name" required>
      </div>
      <div>
        <label class="text-sm mb-1">Category</label>
        <select id="product-category"></select>
      </div>
    </div>
    <div class="mb-4">
      <label class="text-sm mb-1">Description</label>
      <textarea id="product-description" rows="3" required></textarea>
    </div>
    <div class="grid grid-2 gap-4 mb-4">
      <div>
        <label class="text-sm mb-1">Price (‚Çπ)</label>
        <input type="number" id="product-price" min="0" step="0.01" required>
      </div>
      <div>
        <label class="text-sm mb-1">Discount (%)</label>
        <input type="number" id="product-discount" min="0" max="100">
      </div>
    </div>
    <div class="mb-4">
      <label class="text-sm mb-1">Stock Quantity</label>
      <input type="number" id="product-stock" min="0" required>
    </div>
    <div class="mb-4">
      <label class="text-sm mb-1">Image URL</label>
      <input type="url" id="product-image" placeholder="https://example.com/image.jpg">
    </div>
    <div class="flex gap-3">
      <button type="submit" class="bg-purple text-white">Save Product</button>
      <button type="button" id="form-cancel-2" class="border">Cancel</button>
    </div>
  </form>
</div>

<!-- Product List -->
<div id="product-list" class="grid grid-2"></div>

<script>
  const categories = ["Electronics", "Clothing", "Books", "Sports"];
  const user = { id: 1, name: "John Doe" };
  let products = [];
  let editingProductId = null;

  const addBtn = document.getElementById("add-btn");
  const formContainer = document.getElementById("product-form-container");
  const formTitle = document.getElementById("form-title");
  const form = document.getElementById("product-form");
  const cancelBtns = [document.getElementById("form-cancel"), document.getElementById("form-cancel-2")];

  const nameInput = document.getElementById("product-name");
  const descInput = document.getElementById("product-description");
  const categorySelect = document.getElementById("product-category");
  const priceInput = document.getElementById("product-price");
  const discountInput = document.getElementById("product-discount");
  const stockInput = document.getElementById("product-stock");
  const imageInput = document.getElementById("product-image");
  const productList = document.getElementById("product-list");

  // Populate categories
  categories.forEach(cat => {
    const option = document.createElement("option");
    option.value = cat;
    option.textContent = cat;
    categorySelect.appendChild(option);
  });

  function renderProducts() {
    productList.innerHTML = "";
    if (products.length === 0) {
      productList.innerHTML = `<p class="text-gray text-center">No products yet. Add your first product!</p>`;
      return;
    }

    products.forEach(p => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <img src="${p.image || 'https://via.placeholder.com/300'}" alt="${p.name}" class="product-img mb-2">
        <h3 class="mb-1">${p.name}</h3>
        <p class="text-sm text-gray line-clamp-2 mb-2">${p.description}</p>
        <div class="flex justify-between mb-2">
          <div>
            <p>‚Çπ${p.price}</p>
            ${p.discount > 0 ? `<span class="text-xs text-green">${p.discount}% OFF</span>` : ""}
          </div>
          <span class="text-xs px-2 py-1 rounded ${
            p.stock > 10 ? "bg-green-light" : p.stock > 0 ? "bg-yellow-light" : "bg-red-light"
          }">Stock: ${p.stock}</span>
        </div>
        <div class="flex gap-2">
          <button onclick="editProduct('${p.id}')" class="flex-1 bg-blue px-2 py-1 rounded text-white">‚úèÔ∏è Edit</button>
          <button onclick="deleteProduct('${p.id}')" class="flex-1 bg-red-light px-2 py-1 rounded text-red">üóëÔ∏è Delete</button>
        </div>
      `;
      productList.appendChild(div);
    });
  }

  function resetForm() {
    editingProductId = null;
    form.reset();
    formContainer.classList.add("hidden");
  }

  addBtn.addEventListener("click", () => {
    formContainer.classList.remove("hidden");
    formTitle.textContent = "Add New Product";
    form.reset();
    editingProductId = null;
  });

  cancelBtns.forEach(btn => btn.addEventListener("click", resetForm));

  form.addEventListener("submit", e => {
    e.preventDefault();
    const product = {
      id: editingProductId || Date.now().toString(),
      name: nameInput.value,
      description: descInput.value,
      category: categorySelect.value,
      price: parseFloat(priceInput.value),
      discount: parseFloat(discountInput.value || 0),
      stock: parseInt(stockInput.value),
      image: imageInput.value || "https://via.placeholder.com/300",
      sellerId: user.id
    };

    if (editingProductId) {
      const index = products.findIndex(p => p.id === editingProductId);
      products[index] = product;
    } else {
      products.push(product);
    }
    renderProducts();
    resetForm();
  });

  window.editProduct = function(id) {
    const product = products.find(p => p.id === id);
    if (!product) return;
    editingProductId = id;
    formContainer.classList.remove("hidden");
    formTitle.textContent = "Edit Product";
    nameInput.value = product.name;
    descInput.value = product.description;
    categorySelect.value = product.category;
    priceInput.value = product.price;
    discountInput.value = product.discount;
    stockInput.value = product.stock;
    imageInput.value = product.image;
  };

  window.deleteProduct = function(id) {
    if (confirm("Are you sure you want to delete this product?")) {
      products = products.filter(p => p.id !== id);
      renderProducts();
    }
  };

  renderProducts();
</script>

</body>
</html>
